{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Lauri/WebstormProjects/action-verite-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { v4 as uuidv4 } from 'uuid';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/storage.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nfunction HomePage_ion_card_35_ion_item_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\")(2, \"h2\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"ion-button\", 15);\n    i0.ɵɵlistener(\"click\", function HomePage_ion_card_35_ion_item_6_Template_ion_button_click_6_listener() {\n      const player_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.removePlayer(player_r2));\n    });\n    i0.ɵɵelement(7, \"ion-icon\", 16);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const player_r2 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(player_r2.pseudo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(player_r2.genre);\n  }\n}\nfunction HomePage_ion_card_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-card-header\")(2, \"ion-card-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"ion-card-content\")(5, \"ion-list\");\n    i0.ɵɵtemplate(6, HomePage_ion_card_35_ion_item_6_Template, 8, 2, \"ion-item\", 14);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Joueurs (\", ctx_r2.players.length, \")\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.players);\n  }\n}\nexport let HomePage = /*#__PURE__*/(() => {\n  class HomePage {\n    constructor(storageService, router, alertController) {\n      this.storageService = storageService;\n      this.router = router;\n      this.alertController = alertController;\n      this.currentPseudo = '';\n      this.currentGenre = 'Homme';\n      this.players = [];\n    }\n    ngOnInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        // Charge les joueurs sauvegardés\n        _this.players = yield _this.storageService.getPlayers();\n        // Charge le joueur actuel\n        const savedPlayer = yield _this.storageService.getPlayer();\n        if (savedPlayer) {\n          _this.currentPseudo = savedPlayer.pseudo;\n          _this.currentGenre = savedPlayer.genre;\n        }\n      })();\n    }\n    addPlayer() {\n      if (!this.currentPseudo.trim()) {\n        this.showAlert('Erreur', 'Veuillez entrer un pseudo');\n        return;\n      }\n      const newPlayer = {\n        id: uuidv4(),\n        pseudo: this.currentPseudo.trim(),\n        genre: this.currentGenre\n      };\n      this.players.push(newPlayer);\n      this.currentPseudo = '';\n      this.currentGenre = 'Homme';\n    }\n    removePlayer(player) {\n      this.players = this.players.filter(p => p.id !== player.id);\n    }\n    startGame() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        if (_this2.players.length === 0) {\n          yield _this2.showAlert('Erreur', 'Veuillez ajouter au moins un joueur');\n          return;\n        }\n        if (_this2.players.length < 2) {\n          yield _this2.showAlert('Erreur', 'Veuillez ajouter au moins 2 joueurs');\n          return;\n        }\n        // Sauvegarde le joueur actuel\n        if (_this2.currentPseudo.trim()) {\n          yield _this2.storageService.setPlayer({\n            id: 'current',\n            pseudo: _this2.currentPseudo.trim(),\n            genre: _this2.currentGenre\n          });\n        }\n        // Passe à la page de sélection du mode\n        _this2.router.navigate(['/mode']);\n      })();\n    }\n    showAlert(header, message) {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        const alert = yield _this3.alertController.create({\n          header,\n          message,\n          buttons: ['OK']\n        });\n        yield alert.present();\n      })();\n    }\n    static {\n      this.ɵfac = function HomePage_Factory(t) {\n        return new (t || HomePage)(i0.ɵɵdirectiveInject(i1.StorageService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.AlertController));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: HomePage,\n        selectors: [[\"app-home\"]],\n        decls: 38,\n        vars: 6,\n        consts: [[3, \"translucent\"], [\"color\", \"primary\"], [1, \"ion-padding\", 3, \"fullscreen\"], [\"collapse\", \"condense\"], [\"size\", \"large\"], [1, \"content\"], [\"position\", \"stacked\"], [\"placeholder\", \"Ex: Alex\", 3, \"ngModelChange\", \"keyup.enter\", \"ngModel\"], [3, \"ngModelChange\", \"ngModel\"], [\"value\", \"Homme\"], [\"value\", \"Femme\"], [\"expand\", \"block\", 3, \"click\"], [4, \"ngIf\"], [\"expand\", \"block\", \"size\", \"large\", \"color\", \"primary\", 3, \"click\", \"disabled\"], [4, \"ngFor\", \"ngForOf\"], [\"slot\", \"end\", \"fill\", \"clear\", \"color\", \"danger\", 3, \"click\"], [\"name\", \"close-circle\"]],\n        template: function HomePage_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\", 1)(2, \"ion-title\");\n            i0.ɵɵtext(3, \" Action V\\u00E9rit\\u00E9 \");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(4, \"ion-content\", 2)(5, \"ion-header\", 3)(6, \"ion-toolbar\")(7, \"ion-title\", 4);\n            i0.ɵɵtext(8, \"Action V\\u00E9rit\\u00E9\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(9, \"div\", 5)(10, \"h1\");\n            i0.ɵɵtext(11, \"Bienvenue !\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"p\");\n            i0.ɵɵtext(13, \"Ajoutez les joueurs et commencez une partie\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(14, \"ion-card\")(15, \"ion-card-header\")(16, \"ion-card-title\");\n            i0.ɵɵtext(17, \"Ajouter un joueur\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(18, \"ion-card-content\")(19, \"ion-item\")(20, \"ion-label\", 6);\n            i0.ɵɵtext(21, \"Pseudo\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"ion-input\", 7);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function HomePage_Template_ion_input_ngModelChange_22_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.currentPseudo, $event) || (ctx.currentPseudo = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"keyup.enter\", function HomePage_Template_ion_input_keyup_enter_22_listener() {\n              return ctx.addPlayer();\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(23, \"ion-item\")(24, \"ion-label\");\n            i0.ɵɵtext(25, \"Genre\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(26, \"ion-segment\", 8);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function HomePage_Template_ion_segment_ngModelChange_26_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.currentGenre, $event) || (ctx.currentGenre = $event);\n              return $event;\n            });\n            i0.ɵɵelementStart(27, \"ion-segment-button\", 9)(28, \"ion-label\");\n            i0.ɵɵtext(29, \"Homme\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(30, \"ion-segment-button\", 10)(31, \"ion-label\");\n            i0.ɵɵtext(32, \"Femme\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(33, \"ion-button\", 11);\n            i0.ɵɵlistener(\"click\", function HomePage_Template_ion_button_click_33_listener() {\n              return ctx.addPlayer();\n            });\n            i0.ɵɵtext(34, \" Ajouter le joueur \");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵtemplate(35, HomePage_ion_card_35_Template, 7, 2, \"ion-card\", 12);\n            i0.ɵɵelementStart(36, \"ion-button\", 13);\n            i0.ɵɵlistener(\"click\", function HomePage_Template_ion_button_click_36_listener() {\n              return ctx.startGame();\n            });\n            i0.ɵɵtext(37, \" Commencer la partie \");\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵproperty(\"translucent\", true);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"fullscreen\", true);\n            i0.ɵɵadvance(18);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.currentPseudo);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.currentGenre);\n            i0.ɵɵadvance(9);\n            i0.ɵɵproperty(\"ngIf\", ctx.players.length > 0);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"disabled\", ctx.players.length < 2);\n          }\n        },\n        dependencies: [i4.NgForOf, i4.NgIf, i5.NgControlStatus, i5.NgModel, i3.IonButton, i3.IonCard, i3.IonCardContent, i3.IonCardHeader, i3.IonCardTitle, i3.IonContent, i3.IonHeader, i3.IonIcon, i3.IonInput, i3.IonItem, i3.IonLabel, i3.IonList, i3.IonSegment, i3.IonSegmentButton, i3.IonTitle, i3.IonToolbar, i3.SelectValueAccessor, i3.TextValueAccessor],\n        styles: [\".content[_ngcontent-%COMP%]{max-width:600px;margin:0 auto}ion-card[_ngcontent-%COMP%]{margin-bottom:20px}ion-item[_ngcontent-%COMP%]{--padding-start: 0}\"]\n      });\n    }\n  }\n  return HomePage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}